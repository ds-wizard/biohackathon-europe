<div id="q-docs-metadata" class="question">
  <h3>What documentation and meta-data will accompany the data?</h3>
  <p class="answer">

    {# Published datasets #}
    {%- set publishedDataSetsUuid = "4e0c1edf-660c-4ebf-81f5-9fa959dead30" -%}
    {%- set publishedDataSetNameUuid = "b0949d09-d179-4491-9fb4-14b0deb9f862" -%}
    {%- set publishedDataSetRepositoryKindUuid = "80a682bd-8a5c-4a52-935d-680509838a4e" -%}
    {%- set domainSpecificRepositoryAnswerUuid = "1dc412c6-da92-4cc2-8639-316c0c6ec5ff" -%}
    {%- set nationalRepositoryAnswerUuid = "fb96d008-f31a-4a1a-b203-b3f9bb32fcc8" -%}
    {%- set institutionalRepositoryAnswerUuid = "df0b2ee3-8e4d-42a1-9bb2-c69228074406" -%}
    {%- set specialRepositoryAnswerUuid = "afd9f4d5-20e0-4fa0-a42a-376c132ff5b0" -%}
    {%- set publishedDataSetCatalogueUuid = "46039bea-87e6-4c61-8567-4e819404b4d0" -%}
    {%- set publishedDataSetCatalogueYesAnswerUuid = "9e39ea26-cdaf-483b-9502-d47fc4f69bab" -%}
    {%- call (reply) withReply(publishedDataSetsUuid) -%}
      {%- set pathPrefix = publishedDataSetsUuid ~ "." -%}
      {%- set nDataSets = reply.value.value -%}
      {%- if nDataSets > 0 -%}
        We plan to publish the following datasets:
        <ul>
          {%- for i in range(nDataSets - 1) -%}
            {%- set pathPrefixInner = i ~ "." -%}
            {%- call (xreplies) mapReplies([
              pathPrefixInner ~ publishedDataSetNameUuid,
              pathPrefixInner ~ publishedDataSetRepositoryKindUuid,
              pathPrefixInner ~ publishedDataSetCatalogueUuid
            ]) -%}
              {%- set publishedDataSetName = xreplies[0][0].value.value -%}
              {%- set repositoryKindAnswerUuid = xreplies[1][0].value.value -%}
              {%- set catalogueAnswerUuid = xreplies[2][0].value.value -%}
              <li>
                <strong>{{ publishedDataSetName ? publishedDataSetName : "(no name given)" }}</strong>
                {%- if repositoryKindAnswerUuid -%}
                  <p>
                  It will be stored in
                  {%- if repositoryKindAnswerUuid == domainSpecificRepositoryAnswerUuid %}
                    a domain-specific repository.
                    {# deeper #}
                    {%- set pathPrefixRepository = pathPrefixInner ~ publishedDataSetRepositoryKindUuid ~ "." ~ domainSpecificRepositoryAnswerUuid ~ "." -%}
                    {%- set repositoryNameUuid = "221c322e-dff5-438f-8a2e-90e762681156" -%}
                    {%- set contactBeforeUuid = "b1492627-9cb6-465a-945a-a2a7ff9a8189" -%}
                    {%- set contactBeforeNoAnswerUuid = "c86c80b4-72b3-4194-956a-27e40d3c23eb" -%}
                    {%- set contactBeforeYesAlreadyAnswerUuid = "e09562c0-346c-4c95-b470-c5810aab18fa" -%}
                    {%- set contactBeforeYesWillAnswerUuid = "93c590a5-60a6-481d-9482-9145435143a2" -%}
                    {%- set contactBeforeOtherAnswerUuid = "620b1090-2a57-4f3c-b336-97c9e95da637" -%}
                    {%- set contactBeforeOtherUuid = "fc0857c1-e4d2-47f5-86b1-0292bfc7eecf" -%}
                    {%- call (contactReplies) mapReplies([
                      pathPrefixRepository ~ contactBeforeUuid, 
                      pathPrefixRepository ~ contactBeforeUuid ~ "." ~ contactBeforeOtherAnswerUuid ~ "." ~ contactBeforeOtherUuid
                    ]) -%}
                      {%- set contactBeforeAnswerUuid = contactReplies[0][0].value.value -%}
                      {%- set contactBeforeOtherText = contactReplies[1][0].value.value -%}
                      {%- if contactBeforeAnswerUuid == contactBeforeNoAnswerUuid %}
                        We don't need to contact the repository because it is a routine for us.
                      {%- elif contactBeforeAnswerUuid == contactBeforeYesAlreadyAnswerUuid %}
                        We have already contected the repository.
                      {%- elif contactBeforeAnswerUuid == contactBeforeYesWillAnswerUuid %}
                        We are going to contact the repository.
                      {%- elif contactBeforeAnswerUuid == contactBeforeOtherAnswerUuid %}
                        We have made other arrangements{{ contactBeforeOtherText ? ": " ~ contactBeforeOtherText|capitalize : "" }}{{ endswith(contactBeforeOtherText, ".") ? "" : "." }}
                      {%- endif -%}
                    {%- endcall -%}
                  {%- elif repositoryKindAnswerUuid == nationalRepositoryAnswerUuid %}
                    our national repository.
                  {%- elif repositoryKindAnswerUuid == institutionalRepositoryAnswerUuid %}
                    our institutional repository.
                  {%- elif repositoryKindAnswerUuid == specialRepositoryAnswerUuid %}
                    a special-purpose repository for the project.
                    {# deeper #}
                    {%- set pathPrefixRepository = pathPrefixInner ~ publishedDataSetRepositoryKindUuid ~ "." ~ specialRepositoryAnswerUuid ~ "." -%}
                    {%- set longTermSupportUuid = "f83a9afd-c6de-452b-be9f-bd76e5eb6b54" -%}
                    {%- set longTermSupportNoAnswerUuid = "dc921fac-cf77-4d3d-bb9c-907d37f838ef" -%}
                    {%- set longTermSupportYesAnswerUuid = "714e0a22-c059-4f80-9780-6f7f2e2ce53b" -%}
                    {%- set serviceLevelUuid = "cbbfb0da-caf1-4c04-b72f-de39c4a8fb33" -%}
                    {%- set serviceLevelDownloadAnswerUuid = "dc1082fd-1c90-492c-833c-3e0909c643bb" -%}
                    {%- set serviceLevelSimpleAnswerUuid = "da6725a2-62bb-4fe7-a76f-a4e396646b19" -%}
                    {%- set serviceLevelAdvancedAnswerUuid = "d65ddfda-9b08-4ab6-90e5-07df748d7929" -%}
                    {%- call (repositoryReplies) mapReplies([
                      pathPrefixRepository ~ longTermSupportUuid,
                      pathPrefixRepository ~ serviceLevelUuid
                    ]) -%}
                      {%- set longTermSupportAnswerUuid = repositoryReplies[0][0].value.value -%}
                      {%- set serviceLevelAnswerUuid = repositoryReplies[1][0].value.value -%}
                      {%- set administrationAnswerUuid = repositoryReplies[2][0].value.value -%}
                      {%- if longTermSupportAnswerUuid == longTermSupportYesAnswerUuid %}
                        We will be able to support this repository for a sufficiently long time.
                      {%- endif -%}
                      {%- if serviceLevelAnswerUuid == serviceLevelDownloadAnswerUuid %}
                        The repository will provide download-only service.
                      {%- elif serviceLevelAnswerUuid == serviceLevelSimpleAnswerUuid %}
                        The repository will provice a search and simple access interface.
                      {%- elif serviceLevelAnswerUuid == serviceLevelAdvancedAnswerUuid %}
                        The repository will provide an advanced processing service.
                      {%- endif -%}
                    {%- endcall -%}
                  {%- endif -%}
                  </p>
                {%- endif -%}
                {%- if catalogueAnswerUuid == publishedDataSetCatalogueYesAnswerUuid -%}
                  <p>We will be adding a reference to the published data to at least one data catalogue.</p>
                {%- endif -%}
              </li>
            {%- endcall -%}
          {%- endfor -%}
        </ul>
      {%- endif -%}
    {%- endcall -%}

    {# Good provenance (lab notebooks) #}
    {%- set provenanceUuid = "948b5fd8-c1bd-457d-8f81-ea2fd093f541" -%}
    {%- set provenanceLabNotebooksAnswerUuid = "7b450ee7-8783-4adc-9955-fd667fac5a56" -%}
    {%- set provenanceELabNotebookAnswerUuid = "a1e67aee-77dd-486f-ab51-e5a6f39a32cc" -%}
    {%- set provenanceOtherAnswerUuid = "ccdb5296-919c-44ac-89df-351fd2e564ae" -%}
    {%- set provenanceOtherUuid = "b73b8310-3b4f-49c8-a5c0-4208883754ac" -%}
    {%- call (provenanceReplies) mapReplies([provenanceUuid, provenanceOtherUuid]) -%}
      {%- set provenanceAnswerUuid = provenanceReplies[0][0].value.value -%}
      {%- set provenanceOtherText = provenanceReplies[1][0].value.value -%}
      {%- if provenanceAnswerUuid == provenanceLabNotebooksAnswerUuid -%}
        <p>We will use lab notebooks to make sure that there is good provenance of the data analysis.</p>
      {%- elif provenanceAnswerUuid == provenanceELabNotebookAnswerUuid -%}
        <p>We will use an electronic lab notebook to make sure that there is good provenance of the data analysis.</p>
      {%- elif provenanceAnswerUuid == provenanceOtherAnswerUuid -%}
        <p>We will use other solution than (electronic) lab notebooks to make sure that there is good provenance of the data analysis{{ provenanceOtherText ? ": " ~ provenanceOtherText : "" }}{{ endswith(provenanceOtherText, ".") ? "" : "." }}
      {%- endif -%}
    {%- endcall -%}

    {# Documentation with metadata #}
    {%- set documentDCUuid = "8d3b85e0-1683-48a5-a650-9f0d9bf8a1a4" -%}
    {%- set documentDCYesAnswerUuid = "d29ca8b4-0cb6-4678-90fa-e8c72de9073f" -%}
    {%- set documentW3CUuid = "106df534-f590-416b-8e4a-846edbdc4325" -%}
    {%- set documentW3CYesAnswerUuid = "42502a61-5384-4611-a207-90cd02de022f" -%}
    {%- call (documentReplies) mapReplies([documentDCUuid, documentW3CUuid]) -%}
      {%- set usingDC = documentReplies[0][0].value.value == documentDCYesAnswerUuid -%}
      {%- set usingW3C = documentReplies[1][0].value.value == documentW3CYesAnswerUuid -%}
      <p>
        We will be documenting the data with
        {%- if usingDC and usingW3C %}
          Dublin Core metadata and W3C PROV provenance. 
        {%- elif usingDC %}
          Dublin Core metadata. 
        {%- elif usingW3C %}
          W3C PROV provenance. 
        {%- endif -%}
      </p>
    {%- endcall -%}
  </p>
</div>
